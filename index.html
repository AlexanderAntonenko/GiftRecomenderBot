<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gift Recommender Login</title>
</head>
<body>
    <h1>Welcome to Gift Recommender</h1>
    <p>Please login with Telegram to get personalized gift recommendations.</p>
    
    <!-- Telegram Login Widget -->
    <script async src="https://telegram.org/js/telegram-widget.js?22" 
            data-telegram-login="GiftRecomenderBot" 
            data-size="large" 
            data-onauth="onTelegramAuth(user)" 
            data-request-access="write"></script>
    
     
    <script>
    function onTelegramAuth(user) {
        // Отправляем данные на сервер
        fetch('https://3326-46-53-254-144.ngrok-free.app/auth', {  // Укажите ваш URL
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(user),
        })
        .then(response => response.json())
        .then(data => {
        if (data.status === 'success') {
            alert('Welcome, ' + user.first_name + '! Here are your recommendations: ' + data.recommendations.join(', '));
        } else {
            alert('Authentication failed: ' + data.error);
        }
        })
        .catch(error => console.error('Error:', error));
    }
    </script>

</body>
</html>



